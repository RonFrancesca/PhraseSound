#N canvas 443 92 1013 872 10;
#X declare -path ./abstraction;
#X obj 9 190 cnv 15 400 200 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 361 255 952 691 analyze_MIDI_file 0;
#X obj 32 36 inlet;
#X obj 202 35 inlet;
#X obj 73 344 last3values;
#X obj 49 143 midi-player;
#X obj 47 81 openpanel;
#X msg 49 104 read \$1;
#X msg 200 386 open;
#X msg 72 391 merge \$1 \$2;
#X msg 250 402 clear;
#X obj 69 221 unpack 0 0 0 0;
#X obj 72 246 stripnote;
#X text 160 222 tick note vel chan;
#X text 132 244 we just use note and vel and filter note off;
#X obj 73 430 cyclone/coll order2;
#C restore;
#X msg 275 127 flush;
#X text 7 15 open MIDI file;
#X text 200 15 view probab;
#N canvas 835 264 584 262 first2values 0;
#X obj 11 12 inlet;
#X msg 55 41 0;
#X obj 40 78 + 1;
#X obj 11 105 sel 0 1;
#X obj 11 78 i;
#X obj 12 135 i;
#X obj 11 41 t b f;
#X obj 43 135 i;
#X obj 12 187 cyclone/sprintf %i%i;
#X obj 12 212 outlet;
#X obj 13 162 swap;
#X obj 55 12 inlet;
#X text 106 12 this stores the 1st two notes of the MIDI for using
them also as the starting 2 notes of the algorithmic recreation;
#X connect 0 0 6 0;
#X connect 1 0 4 1;
#X connect 2 0 4 1;
#X connect 3 0 5 0;
#X connect 3 1 7 0;
#X connect 4 0 3 0;
#X connect 4 0 2 0;
#X connect 5 0 10 1;
#X connect 6 0 4 0;
#X connect 6 1 5 1;
#X connect 6 1 7 1;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 10 0 8 0;
#X connect 10 1 8 1;
#X connect 11 0 1 0;
#X restore 99 292 pd first2values;
#X floatatom 99 317 5 0 0 0 - - -;
#X obj 72 270 t f f;
#X msg 220 330 \; first2 \$1;
#X obj 32 60 t b b;
#X obj 109 30 inlet;
#X text 105 16 analyse;
#X obj 275 81 t b b;
#X msg 302 102 \; reset bang;
#X obj 186 271 r reset;
#X obj 136 321 r reset;
#X obj 91 167 unpack 0 0 0 0 0;
#X obj 184 192 outlet;
#X obj 250 380 r reset;
#X obj 383 374 last3values;
#X msg 510 416 open;
#X msg 382 421 merge \$1 \$2;
#X msg 560 432 clear;
#N canvas 835 264 584 262 first2values 0;
#X obj 11 12 inlet;
#X msg 55 41 0;
#X obj 40 78 + 1;
#X obj 11 105 sel 0 1;
#X obj 11 78 i;
#X obj 12 135 i;
#X obj 11 41 t b f;
#X obj 43 135 i;
#X obj 12 187 cyclone/sprintf %i%i;
#X obj 12 212 outlet;
#X obj 13 162 swap;
#X obj 55 12 inlet;
#X text 106 12 this stores the 1st two notes of the MIDI for using
them also as the starting 2 notes of the algorithmic recreation;
#X connect 0 0 6 0;
#X connect 1 0 4 1;
#X connect 2 0 4 1;
#X connect 3 0 5 0;
#X connect 3 1 7 0;
#X connect 4 0 3 0;
#X connect 4 0 2 0;
#X connect 5 0 10 1;
#X connect 6 0 4 0;
#X connect 6 1 5 1;
#X connect 6 1 7 1;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 10 0 8 0;
#X connect 10 1 8 1;
#X connect 11 0 1 0;
#X restore 409 322 pd first2values;
#X floatatom 409 347 5 0 0 0 - - -;
#X obj 382 300 t f f;
#X obj 496 301 r reset;
#X obj 446 351 r reset;
#X obj 560 410 r reset;
#X obj 383 460 cyclone/coll order2_vel;
#C restore;
#X msg 530 360 \; first2_vel \$1;
#X text 493 28 Analyse trigger was connected with [t b b] but I deleted
it;
#X symbolatom 414 104 80 0 0 0 - - -;
#X msg 432 136 symbol \$1;
#X connect 0 0 21 0;
#X connect 1 0 6 0;
#X connect 2 0 7 0;
#X connect 3 1 9 0;
#X connect 3 2 28 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 5 0 24 0;
#X connect 5 0 45 0;
#X connect 6 0 13 0;
#X connect 7 0 13 0;
#X connect 8 0 13 0;
#X connect 9 1 10 0;
#X connect 9 2 10 1;
#X connect 10 0 19 0;
#X connect 10 1 37 0;
#X connect 14 0 3 0;
#X connect 17 0 18 0;
#X connect 18 0 20 0;
#X connect 19 0 2 0;
#X connect 19 1 17 0;
#X connect 21 0 4 0;
#X connect 24 0 14 0;
#X connect 24 1 25 0;
#X connect 26 0 17 1;
#X connect 27 0 2 1;
#X connect 28 4 29 0;
#X connect 30 0 8 0;
#X connect 31 0 33 0;
#X connect 32 0 41 0;
#X connect 33 0 41 0;
#X connect 34 0 41 0;
#X connect 35 0 36 0;
#X connect 36 0 42 0;
#X connect 37 0 31 0;
#X connect 37 1 35 0;
#X connect 38 0 35 1;
#X connect 39 0 31 1;
#X connect 40 0 34 0;
#X connect 45 0 44 0;
#X coords 0 -1 1 1 500 20 2 400 100;
#X restore 38 341 pd analyze_MIDI_file;
#X msg 36 272 load MIDI file;
#X msg 153 294 view probabilities;
#X msg 94 294 analyse;
#X floatatom 38 372 5 0 0 1 BPM - BPM;
#X obj 7 394 cnv 15 400 400 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 160 579 metro 200;
#X obj 26 712 makenote;
#X obj 39 71 hsl 128 15 0.2 2 0 0 st_leg_out st_leg_in staccato->legato
10 -8 0 10 -128992 -1 -1 5292 1;
#X floatatom 319 651 5 0 0 0 - - -;
#N canvas 831 148 697 540 getnextnote 0;
#X obj 94 257 cyclone/coll order2;
#C restore;
#X obj 36 462 i;
#X obj 193 293 list length;
#X floatatom 193 314 5 0 0 0 - - -;
#X obj 193 357 random;
#X obj 193 335 t b f;
#X floatatom 193 378 5 0 0 0 - - -;
#X floatatom 95 449 5 0 0 0 - - -;
#X obj 94 419 cyclone/zl nth \$1;
#X obj 94 280 t l l;
#X text 279 286 once we have a list \, we need to get a random element
from it \, so we calculate its length and generate a random value between
0 and length and we output this nth element;
#X obj 94 214 last2values;
#X floatatom 94 193 5 0 0 0 - - -;
#X floatatom 56 175 5 0 0 0 - - -;
#X obj 55 151 % 100;
#X obj 94 152 / 100;
#X obj 94 173 i;
#X floatatom 94 236 5 0 0 0 - - -;
#X obj 193 398 + 1;
#X obj 55 125 t b f f;
#X floatatom 71 69 5 0 0 0 - - -;
#X obj 71 45 r first2;
#X obj 56 93 i;
#X msg 17 57 bang;
#X obj 36 488 outlet;
#X obj 17 28 inlet;
#X obj 142 28 inlet;
#X text 15 9 init;
#X text 139 10 next note;
#X obj 178 83 outlet;
#X text 223 84 first 2 notes (just for checking);
#X connect 0 0 9 0;
#X connect 1 0 11 0;
#X connect 1 0 24 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 5 1 4 1;
#X connect 6 0 18 0;
#X connect 7 0 1 1;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 9 1 2 0;
#X connect 11 0 17 0;
#X connect 12 0 11 0;
#X connect 13 0 1 1;
#X connect 14 0 13 0;
#X connect 15 0 16 0;
#X connect 16 0 12 0;
#X connect 17 0 0 0;
#X connect 18 0 8 1;
#X connect 19 1 14 0;
#X connect 19 2 15 0;
#X connect 20 0 22 1;
#X connect 20 0 29 0;
#X connect 21 0 20 0;
#X connect 22 0 19 0;
#X connect 23 0 22 0;
#X connect 25 0 23 0;
#X connect 26 0 1 0;
#X restore 27 610 pd getnextnote;
#X obj 160 520 t f b;
#X msg 187 545 \; initplay bang;
#X floatatom 108 634 5 0 0 1 first_2_notes - -;
#X obj 48 656 r initplay;
#X obj 26 579 r initplay;
#X msg 547 55 0.95;
#X obj 286 697 * 0.95;
#X msg 207 520 reset;
#X obj 319 671 t b f;
#X text 248 282 1 load a MIDI file 2 analyse it;
#X text 29 427 Monophonic play with these probs;
#X text 137 697 velocity 0-127;
#N canvas 0 23 812 583 getnextvel 0;
#X obj 36 462 i;
#X obj 193 293 list length;
#X floatatom 193 314 5 0 0 0 - - -;
#X obj 193 357 random;
#X obj 193 335 t b f;
#X floatatom 193 378 5 0 0 0 - - -;
#X floatatom 95 449 5 0 0 0 - - -;
#X obj 94 419 cyclone/zl nth \$1;
#X obj 94 280 t l l;
#X text 279 286 once we have a list \, we need to get a random element
from it \, so we calculate its length and generate a random value between
0 and length and we output this nth element;
#X obj 94 214 last2values;
#X floatatom 94 193 5 0 0 0 - - -;
#X floatatom 56 175 5 0 0 0 - - -;
#X obj 55 151 % 100;
#X obj 94 152 / 100;
#X obj 94 173 i;
#X floatatom 94 236 5 0 0 0 - - -;
#X obj 193 398 + 1;
#X obj 55 125 t b f f;
#X floatatom 71 69 5 0 0 0 - - -;
#X obj 56 93 i;
#X msg 17 57 bang;
#X obj 36 488 outlet;
#X obj 17 28 inlet;
#X obj 142 28 inlet;
#X text 15 9 init;
#X text 139 10 next note;
#X obj 178 83 outlet;
#X text 223 84 first 2 notes (just for checking);
#X obj 94 257 cyclone/coll order2_vel;
#C restore;
#X obj 71 45 r first2_vel;
#X connect 0 0 10 0;
#X connect 0 0 22 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 17 0;
#X connect 6 0 0 1;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 8 1 1 0;
#X connect 10 0 16 0;
#X connect 11 0 10 0;
#X connect 12 0 0 1;
#X connect 13 0 12 0;
#X connect 14 0 15 0;
#X connect 15 0 11 0;
#X connect 16 0 29 0;
#X connect 17 0 7 1;
#X connect 18 1 13 0;
#X connect 18 2 14 0;
#X connect 19 0 20 1;
#X connect 19 0 27 0;
#X connect 20 0 18 0;
#X connect 21 0 20 0;
#X connect 23 0 21 0;
#X connect 24 0 0 0;
#X connect 29 0 8 0;
#X connect 30 0 19 0;
#X restore 48 683 pd getnextvel;
#X obj 429 197 declare -path ./abstraction;
#X obj 55 26 bng 23 250 50 0 load_midi empty Load_Midi_File -25 -7
0 10 -191407 -1 -1;
#X obj 36 243 r load_midi;
#X obj 126 26 tgl 23 0 play in_play Play 0 -7 0 10 -191407 -1 -1 0
1;
#X obj 160 455 r play;
#X obj 319 621 r st_leg_out;
#X obj 546 31 loadbang;
#X obj 547 75 s st_leg_in;
#X obj 139 740 s notevent;
#X text 633 69 The loadbang send the initialization value to the staccato-legato
slider;
#X obj 26 754 pack 0 0;
#X obj 26 785 s midi_note_markov;
#X obj 305 556 r bpm_in_ms;
#X obj 99 373 s bpm_from_midi_file;
#X connect 1 0 5 0;
#X connect 1 0 38 0;
#X connect 2 0 1 0;
#X connect 3 0 1 2;
#X connect 4 0 1 1;
#X connect 7 0 11 1;
#X connect 7 0 24 1;
#X connect 8 0 33 0;
#X connect 8 0 35 0;
#X connect 8 1 35 1;
#X connect 10 0 20 0;
#X connect 11 0 8 0;
#X connect 11 1 14 0;
#X connect 12 0 7 0;
#X connect 12 1 13 0;
#X connect 15 0 24 0;
#X connect 16 0 11 0;
#X connect 17 0 32 0;
#X connect 18 0 8 2;
#X connect 19 0 13 0;
#X connect 20 0 18 0;
#X connect 20 1 18 1;
#X connect 24 0 8 1;
#X connect 27 0 2 0;
#X connect 29 0 12 0;
#X connect 30 0 10 0;
#X connect 31 0 17 0;
#X connect 35 0 36 0;
#X connect 37 0 18 0;
#X connect 37 0 7 1;
#X coords 0 -1 1 1 200 100 2 0 0;
